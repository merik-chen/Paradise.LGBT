webpackJsonp([1],{106:function(e,t,n){"use strict";var r=n(57),a=n(310),o=n(305),i=n.n(o);r.a.use(a.a),t.a=new a.a({routes:[{path:"/",name:"Landing",component:i.a}]})},107:function(e,t,n){function r(e){n(175)}var a=n(56)(n(129),n(309),r,null,null);e.exports=a.exports},126:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(57),a=n(107),o=n.n(a),i=n(106);r.a.config.productionTip=!1,new r.a({el:"#app",router:i.a,template:"<Home/>",components:{Home:o.a}})},127:function(e,t,n){"use strict";var r=(n(63),n(128));n.d(t,"a",function(){return r.a})},128:function(e,t,n){"use strict";var r=n(67),a=n.n(r),o=n(64),i=n.n(o),s=n(65),c=n.n(s),u=n(66),l=n.n(u),p=n(63),f=function(){function e(){c()(this,e),this.ajax=p.a.getAjaxInstance()}return l()(e,[{key:"searchByGeo",value:function(){function e(e,n){return t.apply(this,arguments)}var t=i()(a.a.mark(function e(t,n){var r,o,i,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"m",u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="nearBy/"+n+"/"+t+"/"+s+"/"+c+"/"+u,e.next=3,this.ajax.get(r);case 3:return o=e.sent,i=p.a.toJSONAPIObject(o.data),e.abrupt("return",i);case 6:case"end":return e.stop()}},e,this)}));return e}()}]),e}();t.a=f},129:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"app"}},130:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(306),a=n.n(r);t.default={data:function(){return{msg:"Welcome to Your Vue.js App"}},components:{ParadiseRadar:a.a}}},131:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(135),a=n.n(r),o=n(67),i=n.n(o),s=n(64),c=n.n(s),u=n(127),l=n(194),p=new u.a;t.default={data:function(){return{googleMaps:null,radar:null,marker:null,storeList:null,currentPosition:null,previousPosition:null,searchMore:!1,storeMarkers:[],watchID:null}},watch:{currentPosition:function(){this.radar?this.updatePosition():this.initRadar()}},methods:{getUserGeoInfo:function(){var e=this;"geolocation"in navigator&&(e.watchID=navigator.geolocation.watchPosition(function(t){e.previousPosition=e.currentPosition,e.currentPosition={lat:t.coords.latitude,lng:t.coords.longitude}},function(){alert("無法取得您的地理位置")}))},stopWatchPosition:function(){navigator.geolocation.clearWatch(this.watchID),this.watchID=null},searchStores:function(){var e=this;return c()(i.a.mark(function t(){var n,r,a,o,s,c;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e,n.searchMore=!1,r={url:"https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png",size:new n.googleMaps.Size(20,32)},a=e.currentPosition,o=a.lat,s=a.lng,n.removeStores(),t.next=7,p.searchByGeo(o,s);case 7:c=t.sent,n.storeList=c.stores,n.storeList.forEach(function(e){var t=new n.googleMaps.Marker({position:{lat:e.geospatial.lat,lng:e.geospatial.lon},map:n.radar,title:e.name,icon:r});n.storeMarkers.push(t)});case 10:case"end":return t.stop()}},t,e)}))()},initRadar:function(){var e=this,t=a()({},e.currentPosition);e.radar=new e.googleMaps.Map(document.getElementById("radar"),{center:t,zoom:18}),e.marker=new e.googleMaps.Marker({position:t,map:e.radar,animation:e.googleMaps.Animation.DROP}),e.searchStores()},updatePosition:function(){var e=this,t=new e.googleMaps.LatLng(e.currentPosition.lat,e.currentPosition.lng),n=new e.googleMaps.LatLng(e.previousPosition.lat,e.previousPosition.lng);e.googleMaps.geometry.spherical.computeDistanceBetween(t,n)>250&&(e.searchMore=!0),e.radar.panTo(t),e.marker.setPosition(t)},removeStores:function(){var e=this;e.storeMarkers.forEach(function(e){e.setMap(null)}),e.storeMarker=[],e.storeList=null}},created:function(){var e=this;l({key:"AIzaSyDFBy8_iLrMYSfTF5py7plQXBXilhYlt5Y",libraries:["geometry"]}).then(function(t){e.googleMaps=t,e.getUserGeoInfo()})}}},173:function(e,t){},174:function(e,t){},175:function(e,t){},305:function(e,t,n){function r(e){n(173)}var a=n(56)(n(130),n(307),r,"data-v-1b90ae88",null);e.exports=a.exports},306:function(e,t,n){function r(e){n(174)}var a=n(56)(n(131),n(308),r,"data-v-1c56e288",null);e.exports=a.exports},307:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("ParadiseRadar")},staticRenderFns:[]}},308:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:1==e.searchMore,expression:"searchMore==true"}],attrs:{id:"searchMore"}},[n("a",{attrs:{href:"#"},on:{click:e.searchStores}},[e._v("搜尋更多")])]),n("ul",{staticClass:"controlPanel"},[n("li",[n("a",{directives:[{name:"show",rawName:"v-show",value:e.watchID>0,expression:"watchID > 0"}],attrs:{href:"#"},on:{click:e.stopWatchPosition}},[e._v("停止自動更新位置")]),n("a",{directives:[{name:"show",rawName:"v-show",value:0==!!e.watchID,expression:"!!watchID == false"}],attrs:{href:"#"},on:{click:e.getUserGeoInfo}},[e._v("自動更新位置")])])]),n("div",{attrs:{id:"radar"}})])},staticRenderFns:[]}},309:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view",{attrs:{id:"view"}})],1)},staticRenderFns:[]}},63:function(e,t,n){"use strict";var r=n(65),a=n.n(r),o=n(66),i=n.n(o),s=n(108),c=n.n(s),u=n(187),l=n.n(u),p=function(){function e(){a()(this,e)}return i()(e,null,[{key:"getAjaxInstance",value:function(){return c.a.create({baseURL:"/api/"})}},{key:"toJSONAPIObject",value:function(e){return(new(0,l.a.Deserializer)).deserialize(e,function(e,t){return t})}}]),e}();t.a=p}},[126]);
//# sourceMappingURL=app.eb4abc2312c31b2704ee.js.map