webpackJsonp([1],{106:function(e,t,n){"use strict";var r=n(57),a=n(309),o=n(304),i=n.n(o);r.a.use(a.a),t.a=new a.a({routes:[{path:"/",name:"Landing",component:i.a}]})},107:function(e,t,n){var r=n(56)(n(129),n(308),null,null,null);e.exports=r.exports},126:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(57),a=n(107),o=n.n(a),i=n(106);r.a.config.productionTip=!1,new r.a({el:"#app",router:i.a,template:"<Home/>",components:{Home:o.a}})},127:function(e,t,n){"use strict";var r=(n(63),n(128));n.d(t,"a",function(){return r.a})},128:function(e,t,n){"use strict";var r=n(67),a=n.n(r),o=n(64),i=n.n(o),s=n(65),u=n.n(s),c=n(66),l=n.n(c),f=n(63),p=function(){function e(){u()(this,e),this.ajax=f.a.getAjaxInstance()}return l()(e,[{key:"searchByGeo",value:function(){function e(e,n){return t.apply(this,arguments)}var t=i()(a.a.mark(function e(t,n){var r,o,i,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"m",c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="nearBy/"+n+"/"+t+"/"+s+"/"+u+"/"+c,e.next=3,this.ajax.get(r);case 3:return o=e.sent,i=f.a.toJSONAPIObject(o.data),e.abrupt("return",i);case 6:case"end":return e.stop()}},e,this)}));return e}()}]),e}();t.a=p},129:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"app"}},130:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(305),a=n.n(r);t.default={data:function(){return{msg:"Welcome to Your Vue.js App"}},components:{ParadiseRadar:a.a}}},131:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(135),a=n.n(r),o=n(67),i=n.n(o),s=n(64),u=n.n(s),c=n(127),l=n(193),f=new c.a;t.default={data:function(){return{googleMaps:null,radar:null,marker:null,storeList:null,currentPosition:null,searchMore:!1,storeMarkers:[]}},watch:{currentPosition:function(){this.radar?this.updatePosition():this.initRadar()}},methods:{getUserGeoInfo:function(){var e=this;"geolocation"in navigator&&navigator.geolocation.watchPosition(function(t){e.currentPosition={lat:t.coords.latitude,lng:t.coords.longitude}},function(){alert("無法取得您的地理位置")})},searchStores:function(){var e=this;return u()(i.a.mark(function t(){var n,r,a,o,s,u;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e,r={url:"https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png",size:new n.googleMaps.Size(20,32)},a=e.currentPosition,o=a.lat,s=a.lng,n.removeStores(),t.next=6,f.searchByGeo(o,s);case 6:u=t.sent,n.storeList=u.stores,n.storeList.forEach(function(e){var t=new n.googleMaps.Marker({position:{lat:e.geospatial.lat,lng:e.geospatial.lon},map:n.radar,title:e.name,icon:r});n.storeMarkers.push(t)});case 9:case"end":return t.stop()}},t,e)}))()},initRadar:function(){var e=this,t=a()({},e.currentPosition);e.radar=new e.googleMaps.Map(document.getElementById("radar"),{center:t,zoom:19}),e.marker=new e.googleMaps.Marker({position:t,map:e.radar,animation:e.googleMaps.Animation.DROP}),e.searchStores()},updatePosition:function(){var e=this,t=new e.googleMaps.LatLng(e.currentPosition.lat,e.currentPosition.lng);e.radar.panTo(t),e.marker.setPosition(t)},removeStores:function(){var e=this;e.storeMarkers.forEach(function(e){e.setMap(null)}),e.storeMarker=[],e.storeList=null}},created:function(){var e=this;l({key:"AIzaSyDFBy8_iLrMYSfTF5py7plQXBXilhYlt5Y"}).then(function(t){e.googleMaps=t,e.getUserGeoInfo()})}}},173:function(e,t){},174:function(e,t){},304:function(e,t,n){function r(e){n(173)}var a=n(56)(n(130),n(306),r,"data-v-1b90ae88",null);e.exports=a.exports},305:function(e,t,n){function r(e){n(174)}var a=n(56)(n(131),n(307),r,"data-v-1c56e288",null);e.exports=a.exports},306:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("ParadiseRadar")},staticRenderFns:[]}},307:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{attrs:{id:"searchMore"}},[n("a",{on:{click:e.searchStores}},[e._v("搜尋更多")])]),n("div",{attrs:{id:"radar"}})])},staticRenderFns:[]}},308:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]}},63:function(e,t,n){"use strict";var r=n(65),a=n.n(r),o=n(66),i=n.n(o),s=n(108),u=n.n(s),c=n(186),l=n.n(c),f=function(){function e(){a()(this,e)}return i()(e,null,[{key:"getAjaxInstance",value:function(){return u.a.create({baseURL:"/api/"})}},{key:"toJSONAPIObject",value:function(e){return(new(0,l.a.Deserializer)).deserialize(e,function(e,t){return t})}}]),e}();t.a=f}},[126]);
//# sourceMappingURL=app.946b1018a59d0a637152.js.map